<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>MTB Builder - Checkout</title>
    <link rel="stylesheet" href="styles/checkout-styles.css">
</head>
<body>
    <div class="checkout-panel">
        <div id="step-1" class="panel-body step-panel">
            <h2 class="title">Checkout</h2>

            <!-- Step 1 Progress Bar -->
            <div class="progress-bar">
                <div class="step"></div>
                <div class="step"></div>
                <div class="step"></div>
                <div class="step"></div>
            </div>

            <div class="input-fields">
                <div class="column-1">
                    <label for="firstname">First Name</label>
                    <input type="text" id="firstname" />
                    <br />
                    <br />
                    <label for="address1">Address Line 1</label>
                    <input type="text" id="address1" />
                    <br />
                    <br />
                    <label for="city">City</label>
                    <input type="text" id="city" />
                </div>
                
                <div class="column-2">
                    <label for="lastname">Last Name</label>
                    <input type="text" id="lastname" />
                    <br />
                    <br />
                    <label for="address2">Address Line 2 (Optional)</label>
                    <input type="text" id="address2" />
                    <br />
                    <br />
                    <label for="postcode">Postcode / ZIP</label>
                    <input type="text" id="postcode" />
                </div>
            </div>
            </div>

            <div id="step-2" class="panel-body step-panel" style="display: none;">
                <h2 class="title">Checkout</h2>

                <!-- Step 2 Progress Bar -->
                <div class="progress-bar">
                    <div class="step active"></div>
                    <div class="step"></div>
                    <div class="step"></div>
                    <div class="step"></div>
                </div>

                <!-- Payment Method Selection -->
                <div class="payment-method">
                    <label for="card" class="method card">
                        <div class="card-logos">
                            <img src="images/CheckoutImages/visa-logo.png" alt="Visa Logo" />
                            <img src="images/CheckoutImages/mastercard-logo.png" alt="MasterCard Logo" />
                        </div>

                        <div class="radio-input">
                            <input id="card" type="radio" name="payment" />
                            Pay with credit card
                        </div>
                    </label>
                    <label for="paypal" class="method paypal">
                        <div class="card-logos">
                            <img src="images/CheckoutImages/paypal-logo.png" alt="PayPal Logo" />
                        </div>

                        <div class="radio-input">
                            <input id="paypal" type="radio" name="payment" />
                            Pay with PayPal
                        </div>
                    </label>
                </div>


                <!-- Credit Card Details Input -->
                <div class="input-fields">
                    <div class="column-1">
                        <label for="cardholder">Cardholder's Name</label>
                        <input type="text" id="cardholder" />

                        <div class="small-inputs">
                            <div>
                                <label for="date">Valid Until</label>
                                <input type="text"
                                       id="date"
                                       maxlength="7"
                                       inputmode="numeric"
                                       placeholder="MM / YY" />
                            </div>

                            <div>
                                <label for="verification">CVV / CVC *</label>
                                <input type="text"
                                       id="verification"
                                       maxlength="3"
                                       inputmode="numeric" />
                            </div>
                        </div>
                    </div>

                    <div class="column-2">
                        <label for="cardnumber">Card Number</label>
                        <input type="text"
                               id="cardnumber"
                               maxlength="19"
                               inputmode="numeric"
                               placeholder="1234 5678 9012 3456" />

                        <span class="info">
                            * CVV or CVC is the card security code, a unique three-digit number on the back of your card separate from its number.
                        </span>
                    </div>
                </div>
            </div>

            <div id="step-3" class="panel-body step-panel" style="display: none;">
                <h2 class="title">Checkout</h2>

                <!-- Step 3 Progress Bar -->
                <div class="progress-bar">
                    <div class="step active"></div>
                    <div class="step active"></div>
                    <div class="step"></div>
                    <div class="step"></div>
                </div>

            </div>

            <div id="step-4" class="panel-body step-panel" style="display: none;">
                <h2 class="title">Checkout</h2>

                <!-- Step 4 Progress Bar -->
                <div class="progress-bar">
                    <div class="step active"></div>
                    <div class="step active"></div>
                    <div class="step active"></div>
                    <div class="step"></div>
                </div>

            </div>

            <!-- Footer with back/next buttons -->
            <div class="panel-footer">
                <button class="btn back-btn">Back</button>
                <button class="btn next-btn">Next Step</button>
            </div>
        </div>

</body>
<script>
    //-----------------------------------CARD NUMBER-----------------------------------
    const CardInput = document.getElementById('cardnumber');

    CardInput.addEventListener('input', (e) => {
        //only allow digits
        let value = e.target.value.replace(/\D/g, '');

        //max 16 digits
        value = value.substring(0, 16);

        //spaces
        const formatted = value.match(/.{1,4}/g)?.join(' ') || '';

        e.target.value = formatted;
    });

    //-----------------------------------VALID UNTIL-----------------------------------
    const ValidUntilInput = document.getElementById('date');

    ValidUntilInput.addEventListener('input', (e) => {
        //only allow digits
        let value = e.target.value.replace(/\D/g, '');

        //max 4 digits
        value = value.substring(0, 4);

        //add the " / " after the first two characters inputted
        if (value.length > 2) {
            value = value.substring(0, 2) + ' / ' + value.substring(2);
        }

        e.target.value = value;
    });

    //-----------------------------------CVV-----------------------------------

    const CVVInput = document.getElementById('verification')
    CVVInput.addEventListener('input', (e) => {
        //only allow digits
        let value = e.target.value.replace(/\D/g, '');
        e.target.value = value;
    });

</script>
<script src="js/checkout-script.js"></script>
</html>